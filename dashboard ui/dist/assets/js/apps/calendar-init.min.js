"use strict";

document.addEventListener("DOMContentLoaded", function () {
  var e = new Date(),
    t = String(e.getDate()).padStart(2, "0"),
    n = String(e.getMonth() + 1).padStart(2, "0"),
    a = e.getFullYear(),
    s = new Date(e),
    s = (s.setDate(e.getDate() + 1), String(s.getDate()).padStart(2, "0"), String(s.getMonth() + 1).padStart(2, "0"), s.getFullYear(), new Date(e)),
    e = (s.setDate(e.getDate() - 1), String(s.getDate()).padStart(2, "0")),
    i = String(s.getMonth() + 1).padStart(2, "0"),
    r = a + "-" + n,
    s = s.getFullYear() + "-" + i + "-" + e,
    i = a + "-" + n + "-" + t,
    u = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
    e = (document.getElementById("calendar"), document.getElementById("externalEvents"), document.getElementById("removeEvent"), $("#addEvent")),
    a = ($("#addEventForm"), $("#updateEvent")),
    h = $("#editEventForm"),
    g = ($("#editEventPopup"), $("#previewEventPopup")),
    n = $("#deleteEvent"),
    t = document.getElementById("calendar"),
    d = new FullCalendar.Calendar(t, {
      timeZone: "UTC",
      themeSystem: "bootstrap",
      headerToolbar: {
        left: "today prev,next",
        center: "title",
        right: "dayGridMonth,timeGridWeek,timeGridDay,listWeek"
      },
      height: 800,
      contentHeight: 780,
      aspectRatio: 3,
      editable: !0,
      droppable: !0,
      views: {
        dayGridMonth: {
          dayMaxEventRows: 2
        }
      },
      nowIndicator: !0,
      now: i + "T09:25:00",
      eventClick: function eventClick(e) {
        var t = e.event._def.title,
          n = e.event._def.extendedProps.description,
          a = e.event._instance.range.start,
          s = a.getFullYear() + "-" + String(a.getMonth() + 1).padStart(2, "0") + "-" + String(a.getDate()).padStart(2, "0"),
          i = a.toUTCString().split(" "),
          r = (i = "00:00:00" == (i = i[i.length - 2]) ? "" : i, e.event._instance.range.end),
          d = r.getFullYear() + "-" + String(r.getMonth() + 1).padStart(2, "0") + "-" + String(r.getDate()).padStart(2, "0"),
          o = r.toUTCString().split(" "),
          l = (o = "00:00:00" == (o = o[o.length - 2]) ? "" : o, e.event._def.ui.classNames[0].slice(3)),
          e = e.event._def.publicId,
          s = ($("#edit-event-title").val(t), $("#edit-event-start-date").val(s).datepicker("update"), $("#edit-event-end-date").val(d).datepicker("update"), $("#edit-event-description").val(n), $("#edit-event-theme").val(l), $("#edit-event-theme").trigger("change.select2"), h.attr("data-id", e), String(a.getDate()).padStart(2, "0") + " " + u[a.getMonth()] + " " + a.getFullYear() + (i ? " - " + m(i) : "")),
          d = String(r.getDate()).padStart(2, "0") + " " + u[r.getMonth()] + " " + r.getFullYear() + (o ? " - " + m(o) : "");
        $("#preview-event-title").text(t), $("#preview-event-header").addClass("fc-" + l), $("#preview-event-start").text(s), $("#preview-event-end").text(d), $("#preview-event-description").text(n), n || $("#preview-event-description-check").css("display", "none"), g.modal("show");
      },
      events: [{
        id: "default-event-id-" + Math.floor(9999999 * Math.random()),
        title: "Company standup meeting",
        start: r + "-03T13:30:00",
        className: "fc-event-danger-subtle",
        description: "Use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden. Passage of Lorem Ipsum, you need to be sure there isn't anything hidden."
      }, {
        id: "default-event-id-" + Math.floor(9999999 * Math.random()),
        title: "Web design presentation",
        start: r + "-14T13:30:00",
        end: r + "-14",
        className: "fc-event-success-subtle",
        description: "Use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden. Passage of Lorem Ipsum, you need to be sure there isn't anything hidden."
      }, {
        id: "default-event-id-" + Math.floor(9999999 * Math.random()),
        title: "Standup sesign presentation",
        start: r + "-05",
        end: r + "-06",
        className: "fc-event-primary-subtle",
        description: "Use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden. Passage of Lorem Ipsum, you need to be sure there isn't anything hidden."
      }, {
        id: "default-event-id-" + Math.floor(9999999 * Math.random()),
        title: "Company start concept",
        start: r + "-02",
        end: r + "-04",
        className: "fc-event-primary-subtle",
        description: "Use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden. Passage of Lorem Ipsum, you need to be sure there isn't anything hidden."
      }, {
        title: "Meeting with USA client",
        start: r + "-12",
        end: r + "-10",
        className: "fc-event-warning-subtle",
        description: "Use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden. Passage of Lorem Ipsum, you need to be sure there isn't anything hidden."
      }, {
        id: "default-event-id-" + Math.floor(9999999 * Math.random()),
        title: "Admin Design Review",
        start: r + "-07T16:00:00",
        className: "fc-event-danger-subtle",
        description: "Use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden. Passage of Lorem Ipsum, you need to be sure there isn't anything hidden."
      }, {
        id: "default-event-id-" + Math.floor(9999999 * Math.random()),
        title: "Visit online course",
        start: r + "-16T16:00:00",
        end: r + "-14",
        className: "fc-event-info-subtle",
        description: "Use a passage of Lorem Ipsum, you need to be sure there isn't anything need to be sure there isn't anything embarrassing hidden."
      }, {
        id: "default-event-id-" + Math.floor(9999999 * Math.random()),
        title: "Meeting with designer",
        start: i,
        end: i + "-01",
        className: "fc-event-primary-subtle",
        description: "Use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden. Passage of Lorem Ipsum, you need to be sure there isn't anything hidden."
      }, {
        id: "default-event-id-" + Math.floor(9999999 * Math.random()),
        title: "Weekly strategy planning",
        start: i + "T10:00:00",
        className: "fc-event-success-subtle",
        description: "Use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden. Passage of Lorem Ipsum, you need to be sure there isn't anything hidden."
      }, {
        id: "default-event-id-" + Math.floor(9999999 * Math.random()),
        title: "Flash sale starting Tomorrow",
        start: i + "T14:30:00",
        className: "fc-event-warning-subtle",
        description: "Use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden. Passage of Lorem Ipsum, you need to be sure there isn't anything hidden."
      }, {
        id: "default-event-id-" + Math.floor(9999999 * Math.random()),
        title: "Monthly sales report",
        start: i + "T17:30:00",
        className: "fc-event-success-subtle",
        description: "Use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden. Passage of Lorem Ipsum, you need to be sure there isn't anything hidden."
      }, {
        id: "default-event-id-" + Math.floor(9999999 * Math.random()),
        title: "Favorites product scale",
        start: s + "T05:00:00",
        className: "fc-event-danger-subtle",
        description: "Use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden. Passage of Lorem Ipsum, you need to be sure there isn't anything hidden."
      }, {
        id: "default-event-id-" + Math.floor(9999999 * Math.random()),
        title: "Meeting with printing designer",
        start: s + "T07:00:00",
        className: "fc-event-primary-subtle",
        description: "Use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden. Passage of Lorem Ipsum, you need to be sure there isn't anything hidden."
      }, {
        id: "default-event-id-" + Math.floor(9999999 * Math.random()),
        title: "Visit online course",
        start: r + "-31T16:00:00",
        end: r + "-30",
        className: "fc-event-success-subtle",
        description: "Use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden. Passage of Lorem Ipsum, you need to be sure there isn't anything hidden."
      }]
    });
  function m(e) {
    return 1 < (e = e.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/) || [e]).length && ((e = e.slice(1)).pop(), e[5] = +e[0] < 12 ? " AM" : " PM", e[0] = +e[0] % 12 || 12), e = e.join("");
  }
  d.render(), e.on("click", function (e) {
    e.preventDefault();
    var e = $("#event-title").val(),
      t = $("#event-start-date").val(),
      n = $("#event-end-date").val(),
      a = $("#event-description").val(),
      s = $("#event-theme").val();
    d.addEvent({
      id: "added-event-id-" + Math.floor(9999999 * Math.random()),
      title: e,
      start: t,
      end: n,
      className: "fc-" + s,
      description: a
    });
  }), a.on("click", function (e) {
    e.preventDefault();
    var e = $("#edit-event-title").val(),
      t = $("#edit-event-start-date").val(),
      n = $("#edit-event-end-date").val(),
      a = $("#edit-event-description").val(),
      s = $("#edit-event-theme").val();
    d.getEventById(h[0].dataset.id).remove(), d.addEvent({
      id: h[0].dataset.id,
      title: e,
      start: t,
      end: n,
      className: "fc-" + s,
      description: a
    });
  }), n.on("click", function (e) {
    e.preventDefault(), d.getEventById(h[0].dataset.id).remove();
  }), $(".select-calendar-theme").select2({
    templateResult: function templateResult(e) {
      return e.id ? $('<span class="fc-' + e.element.value + '"> <span class="dot"></span>' + e.text + "</span>") : e.text;
    }
  }), g.on("hidden.bs.modal", function (e) {
    $("#preview-event-header").removeClass().addClass("modal-header");
  });
});